{% extends 'store/base.html' %}
{% load static %}
{% block content %}
<div class="row">
<div class="col-lg-6">
 <div class="box-element" id="form-wrapper">
   <form id="form">
     <div id="user-info">
       <div class="form-field">
         <input required class="form-control" type="text" name="name" placeholder="Name..">
       </div>
       <div class="form-field">
         <input required class="form-control" type="email" name="email" placeholder="Email..">
       </div>
     </div>

     <div id="shipping-info">
       <hr>
       <p>Shipping Information:</p>
       <hr>
       <div class="form-field">
         <input class="form-control" type="text" name="address" placeholder="Address..">
       </div>
       <div class="form-field">
         <input class="form-control" type="text" name="city" placeholder="City..">
       </div>
       <div class="form-field">
         <input class="form-control" type="text" name="state" placeholder="State..">
       </div>
       <div class="form-field">
         <input class="form-control" type="text" name="zipcode" placeholder="Zip code..">
       </div>
       <div class="form-field">
         <input class="form-control" type="text" name="country" placeholder="Zip code..">
       </div>
     </div>

     <hr>
     <input id="form-button" class="btn btn-success btn-block" type="submit" value="Continue">
   </form>
 </div>

 <br>
 <div class="box-element hidden" id="payment-info">
   <small>Paypal Options</small>
 </div>

</div>

<div class="col-lg-6">
  {% if request.basket %}
        {% if  request.basket.get_cart_items >= 1  %}
            <div class="box-element">
              <a  class="btn btn-outline-dark" href="{% url 'store:cart' %}">&#x2190; Regreso a la Carta</a>
              <hr>
              <h3>Total de Articulos: {{ request.basket.get_cart_items }}</h3>
              <hr>
                {% for basketItem in  request.basket.basketitem_set.all %}
                <div class="cart-row">
                  {% if  basketItem.producto.imagenes.all %}
                    {% with basketItem.producto.imagenes.all|first as obj %}
                      <div style="flex:2"><img class="row-image" src="{{ obj.imagen.url }}"></div>
                    {% endwith %}
                  {% else %}
                  <div style="flex:2"><img class="row-image"  src="{% static 'images/placeholder.png' %}"></div>

                 {% endif %}
                  <div style="flex:2"><p>{{ basketItem.producto.nombre}}</p></div>
                  <div style="flex:1"><p>{{ basketItem.get_total}}</p></div>
                  <div style="flex:1"><p>{{ basketItem.cantidad}}</p></div>
                </div>
                {% endfor %}

              <h5>productos: {{ request.basket.get_cart_items }} </h5>
              <h5>Total:  {{ request.basket.get_cart_total }} </h5>
            </div>

        {% else %}
        <div class="box-element">
          <a  class="btn btn-outline-dark" href="{% url 'store:cart' %}">&#x2190; Regreso a la Carta</a>
          <hr>
          <h3>Total de Articulos:</h3>
          <hr>
          <h5>productos: 0</h5>
          <h5>Total:   $0</h5>
        </div>

        {% endif %}
  {% else %}
  <div class="box-element">
    <a  class="btn btn-outline-dark" href="{% url 'store:cart' %}">&#x2190; Regreso a la Carta</a>
    <hr>
    <h3>Total de Articulos:</h3>
    <hr>
    <h5>productos: 0</h5>
    <h5>Total:   $0</h5>
  </div>

  {% endif %}

</div>
</div>
{% endblock %}
